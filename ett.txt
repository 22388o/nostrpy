DEBUG:root:SQLiteStore::__init__ db_file=/home/shaun/.nostrpy//nostr-client.db
DEBUG:root:Database::select_sql - SQL: select * from profiles
        order by 
            case when profile_name ISNULL or profile_name='' then 1 else 0 end, profile_name,
            case when name ISNULL or name='' then 1 else 0 end, name
         
 ARGS: []
DEBUG:root:Database::select_sql - SQL: select * from contacts  where  pub_k_owner in (?)  
 ARGS: ['40e162e0a8d139c9ef1d1bcba5265d1953be1381fb4acd227d8f3c391f9b9486']
DEBUG:root:Database::select_sql - SQL: select * from events  where created_at>=? and kind in(?,?,?,?)order by created_at desc 
 ARGS: [1652087101, 1, 4, 0, 3]
DEBUG:root:Client::_on_open ws://localhost:8081
DEBUG:root:Client::subscribe - ["REQ", "0050", {"kind": 0}]
DEBUG:root:Database::select_sql - SQL: 
        select created_at from events e 
        inner join event_relay er on e.id = er.id
        where er.relay_url = ?
        order by created_at desc limit 1
         
 ARGS: ['ws://localhost:8081']
DEBUG:root:Client::subscribe - ["REQ", "65ec", {"since": 1652173488}]
DEBUG:root:Expecting value: line 1 column 1 (char 0)
DEBUG:root:Database::execute_batch SQL: insert into events(event_id, pubkey, created_at, kind, tags, content,sig) values(?,?,?,?,?,?,?)
 ARGS: ['44d9416cf8ce1ac50bb5f5b723b331d5a57f497bc6f49dd433565725c7826f83', '40e162e0a8d139c9ef1d1bcba5265d1953be1381fb4acd227d8f3c391f9b9486', 1652173506, 4, '[["p", "2d11d3a3123287b478e19e9ef011bceb48e8f14a0d58e22bd156f35a839c5640"]]', 'bHwth/Xat7/4hPCLPJB8ZQ==?iv=FUlt5p0VP6nAk6tjBuAvkg==', 'da4af5984f7ee781b708cdf964d48510e818566b13f27b6fb4c61a238000a0f49d0435e6c62b06d2b230619ee79f2df1587fbc6bed31c8848c17050c147cc248']
DEBUG:root:Database::execute_batch error - not committed UNIQUE constraint failed: events.event_id
DEBUG:root:Database::select_sql - SQL: SELECT  e.id, er.relay_url from events e inner join event_relay er on e.id = er.id where e.event_id = ? 
 ARGS: ['44d9416cf8ce1ac50bb5f5b723b331d5a57f497bc6f49dd433565725c7826f83']
DEBUG:root:Database::execute_batch SQL: insert into events(event_id, pubkey, created_at, kind, tags, content,sig) values(?,?,?,?,?,?,?)
 ARGS: ['329ee839947a03a967906b1ee37d4423339cf982a1c5f4c17389e4c2a4144633', '40e162e0a8d139c9ef1d1bcba5265d1953be1381fb4acd227d8f3c391f9b9486', 1652173512, 4, '[["p", "2d11d3a3123287b478e19e9ef011bceb48e8f14a0d58e22bd156f35a839c5640"]]', 'J0h1B7v0gGYMBYg8vayJiw==?iv=2qDhYOjK5PWfa5Dgz29H8w==', '9171b0b7f31a5a728d255426aefef0710d38c30d60b1aba47ce4268dbdcc5e008992f089643f90907095e01f7374b5085f3922b91721a1a300bb117218c0df36']
DEBUG:root:Database::execute_batch error - not committed UNIQUE constraint failed: events.event_id
DEBUG:root:Database::select_sql - SQL: SELECT  e.id, er.relay_url from events e inner join event_relay er on e.id = er.id where e.event_id = ? 
 ARGS: ['329ee839947a03a967906b1ee37d4423339cf982a1c5f4c17389e4c2a4144633']
DEBUG:root:Database::execute_batch SQL: insert into events(event_id, pubkey, created_at, kind, tags, content,sig) values(?,?,?,?,?,?,?)
 ARGS: ['f2e5d9353ebe66a87a52f46b59a3f363d2548e9b92d26eb267be681c80ed686a', '40e162e0a8d139c9ef1d1bcba5265d1953be1381fb4acd227d8f3c391f9b9486', 1652173522, 4, '[["p", "2d11d3a3123287b478e19e9ef011bceb48e8f14a0d58e22bd156f35a839c5640"]]', 'O50ao8YCuNzr12q5e9CWkiKVDoAEAvJ0VL/SgOoHF1U=?iv=PjQazfnQpXwJKtc3wysy0A==', '7515303752998fda74c397e85be5611aaa6bed2944ade18cf3adfcd4d4b90fdd6e027a201812b317f6a1d7e5acf76e8321f74c6436877a56e094640fc27bc49b']
DEBUG:root:Database::execute_batch error - not committed UNIQUE constraint failed: events.event_id
DEBUG:root:Database::select_sql - SQL: SELECT  e.id, er.relay_url from events e inner join event_relay er on e.id = er.id where e.event_id = ? 
 ARGS: ['f2e5d9353ebe66a87a52f46b59a3f363d2548e9b92d26eb267be681c80ed686a']
DEBUG:root:SQLProfileStore::update sql: 
                update profiles 
                    set attrs=?, name=?, picture=?, updated_at=?
                    where pub_k=?
             args: ['{"name": "\\u7518\\u6797\\u8001\\u6728", "picture": "https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg", "about": "\\u6de6", "nip05": "\\u7518\\u6797\\u8001\\u6728@oooxxx.ml"}', '甘林老木', 'https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg', 1652173610, 'b238e136091cb01cd21606dac1a2f503f504e7e8e7c75d98fcefd30aed084a1c']
DEBUG:root:Database::execute_batch SQL: 
                update profiles 
                    set attrs=?, name=?, picture=?, updated_at=?
                    where pub_k=?
            
 ARGS: ['{"name": "\\u7518\\u6797\\u8001\\u6728", "picture": "https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg", "about": "\\u6de6", "nip05": "\\u7518\\u6797\\u8001\\u6728@oooxxx.ml"}', '甘林老木', 'https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg', 1652173610, 'b238e136091cb01cd21606dac1a2f503f504e7e8e7c75d98fcefd30aed084a1c']
DEBUG:root:Database::execute_batch SQL: insert into events(event_id, pubkey, created_at, kind, tags, content,sig) values(?,?,?,?,?,?,?)
 ARGS: ['a4c65a00a74bdd30e801ad08f29bae998069cf4fc0355adae9a8f6258f7f2c0d', 'b238e136091cb01cd21606dac1a2f503f504e7e8e7c75d98fcefd30aed084a1c', 1652173610, 0, '[]', '{"name":"甘林老木","picture":"https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg","about":"淦","nip05":"甘林老木@oooxxx.ml"}', '81c5b953023dc2ae7fba0a3c13b7dc88477bda9e6a54325d960da85e8012cae89c82750334620ec856bfd79e556772766ea7c3fd02c7af7ce4abeb26b611e60f']
DEBUG:root:Database::execute_batch error - not committed UNIQUE constraint failed: events.event_id
DEBUG:root:Database::select_sql - SQL: SELECT  e.id, er.relay_url from events e inner join event_relay er on e.id = er.id where e.event_id = ? 
 ARGS: ['a4c65a00a74bdd30e801ad08f29bae998069cf4fc0355adae9a8f6258f7f2c0d']
DEBUG:root:Database::execute_batch SQL: insert into event_relay values (?, ?)
 ARGS: [1577, 'ws://localhost:8081']
DEBUG:root:SQLProfileStore::update sql: 
                update profiles 
                    set attrs=?, name=?, picture=?, updated_at=?
                    where pub_k=?
             args: ['{"name": "\\u7518\\u6797\\u8001\\u6728", "picture": "https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg", "about": "\\u6de6", "nip05": "\\u7518\\u6797\\u8001\\u6728@oooxxx.ml"}', '甘林老木', 'https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg', 1652173628, 'b238e136091cb01cd21606dac1a2f503f504e7e8e7c75d98fcefd30aed084a1c']
DEBUG:root:Database::execute_batch SQL: 
                update profiles 
                    set attrs=?, name=?, picture=?, updated_at=?
                    where pub_k=?
            
 ARGS: ['{"name": "\\u7518\\u6797\\u8001\\u6728", "picture": "https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg", "about": "\\u6de6", "nip05": "\\u7518\\u6797\\u8001\\u6728@oooxxx.ml"}', '甘林老木', 'https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg', 1652173628, 'b238e136091cb01cd21606dac1a2f503f504e7e8e7c75d98fcefd30aed084a1c']
DEBUG:root:Database::execute_batch SQL: insert into events(event_id, pubkey, created_at, kind, tags, content,sig) values(?,?,?,?,?,?,?)
 ARGS: ['474aba4a2e843223fbd01ff0929fa430b14ae5337137c3233c077f650148177b', 'b238e136091cb01cd21606dac1a2f503f504e7e8e7c75d98fcefd30aed084a1c', 1652173628, 0, '[]', '{"name":"甘林老木","picture":"https://i.ibb.co/NrdZmm4/bc07bc531d2b6750121acc077133b6f7.jpg","about":"淦","nip05":"甘林老木@oooxxx.ml"}', 'add1c8a94460e9c4c296a066e62922ef8ce4af58ba5326a85627613963e2aae817095ad94da96f5feae695c71d35ca74be9f7e1589f24c524131eef3337145e0']
DEBUG:root:Database::execute_batch error - not committed UNIQUE constraint failed: events.event_id
DEBUG:root:Database::select_sql - SQL: SELECT  e.id, er.relay_url from events e inner join event_relay er on e.id = er.id where e.event_id = ? 
 ARGS: ['474aba4a2e843223fbd01ff0929fa430b14ae5337137c3233c077f650148177b']
DEBUG:root:Database::execute_batch SQL: insert into event_relay values (?, ?)
 ARGS: [1578, 'ws://localhost:8081']
Exception ignored in: <module 'threading' from '/usr/lib/python3.8/threading.py'>
Traceback (most recent call last):
  File "/usr/lib/python3.8/threading.py", line 1388, in _shutdown
    lock.acquire()
KeyboardInterrupt: 
